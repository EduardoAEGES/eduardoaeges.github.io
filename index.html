<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Buscador de Auditor√≠a</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
        body { font-family: Arial; padding: 20px; background: #f4f4f9; }
        .container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        input { width: 100%; padding: 10px; box-sizing: border-box; border: 1px solid #ddd; border-radius: 4px; }
        #sugerencias { border: 1px solid #ddd; border-top: none; max-height: 150px; overflow-y: auto; display: none; }
        .sugerencia-item { padding: 10px; cursor: pointer; border-bottom: 1px solid #eee; }
        .sugerencia-item:hover { background: #e9ecef; }
        .resultado { margin-top: 20px; padding: 15px; border: 1px solid #28a745; border-radius: 4px; display: none; }
    </style>
</head>
<body>
    <div class="container">
        <h2>üîç Buscador de Docentes</h2>
        <input type="text" id="buscador" placeholder="Escribe un nombre (ej. Jorge)..." oninput="filtrar()">
        <div id="sugerencias"></div>

        <div id="resultado" class="resultado">
            <p><strong>DNI:</strong> <span id="res-dni"></span></p>
            <p><strong>Apellidos:</strong> <span id="res-ape"></span></p>
            <p><strong>Nombres:</strong> <span id="res-nom"></span></p>
        </div>
    </div>

    <script>
        const URL_CSV = 'TU_ENLACE_DE_GOOGLE_SHEETS_AQU√ç';
        let datos = [];

        // Cargar datos de Google Sheets al abrir la p√°gina
        Papa.parse(URL_CSV, {
            download: true,
            header: true,
            complete: function(results) {
                datos = results.data;
                console.log("Datos cargados");
            }
        });

        function filtrar() {
            const query = document.getElementById('buscador').value.toLowerCase();
            const sugerenciasDiv = document.getElementById('sugerencias');
            sugerenciasDiv.innerHTML = '';
            
            if (query.length < 2) { sugerenciasDiv.style.display = 'none'; return; }

            const filtrados = datos.filter(d => 
                (d.Nombres && d.Nombres.toLowerCase().includes(query)) || 
                (d.Apellidos && d.Apellidos.toLowerCase().includes(query))
            ).slice(0, 5); // Mostrar solo top 5 sugerencias

            if (filtrados.length > 0) {
                sugerenciasDiv.style.display = 'block';
                filtrados.forEach(doc => {
                    const div = document.createElement('div');
                    div.className = 'sugerencia-item';
                    div.innerText = `${doc.Apellidos}, ${doc.Nombres}`;
                    div.onclick = () => mostrarDetalle(doc);
                    sugerenciasDiv.appendChild(div);
                });
            } else {
                sugerenciasDiv.style.display = 'none';
            }
        }

        function mostrarDetalle(doc) {
            document.getElementById('sugerencias').style.display = 'none';
            document.getElementById('resultado').style.display = 'block';
            document.getElementById('res-dni').innerText = doc.DNI;
            document.getElementById('res-ape').innerText = doc.Apellidos;
            document.getElementById('res-nom').innerText = doc.Nombres;
            document.getElementById('buscador').value = `${doc.Apellidos}, ${doc.Nombres}`;
        }
    </script>
</body>
</html>